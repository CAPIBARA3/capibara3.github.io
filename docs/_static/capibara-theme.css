/* ============================================================
   Custom Theme Palette
   Overrides for PyData Sphinx Theme (light + dark)
   ============================================================ */

:root {
    --primary-color: #bf87e6;
    --secondary-color: #ffc857;
    --accent-color: #ff4fa0;
    --navbutton-color: #ff9800;

    --background-color: #f5f5f5;
    --text-color: #2d2d2d;
    --card-bg: #ffffff;

    --header-gradient: linear-gradient(
        135deg,
        var(--secondary-color),
        var(--primary-color)
    );

    --glow-color: rgba(255, 79, 160, 0.3);
    --dark-bg: #111;

    /* Map to PyData Theme Variables */
    --pst-color-primary: var(--primary-color);
    --pst-color-secondary: var(--secondary-color);
    --pst-color-accent: var(--accent-color);
    --pst-color-background: var(--background-color);
    --pst-color-text: var(--text-color);
}

/* ----------------------------------------------------------------
   DARK THEME
---------------------------------------------------------------- */
@media (prefers-color-scheme: dark) {
    :root {
        --primary-color: #a56bd6;
        --secondary-color: #ffbb33;
        --accent-color: #ff66a3;

        --background-color: #1a1a1a;
        --text-color: #f0f0f0;
        --card-bg: #2d2d2d;

        --header-gradient: linear-gradient(
            135deg,
            var(--secondary-color),
            var(--primary-color)
        );

        --glow-color: rgba(255, 102, 163, 0.3);
        --dark-bg: #111;

        /* PyData dark override */
        --pst-color-primary: var(--primary-color);
        --pst-color-secondary: var(--secondary-color);
        --pst-color-accent: var(--accent-color);
        --pst-color-background: var(--background-color);
        --pst-color-text: var(--text-color);
    }
}

/* ----------------------------------------------------------------
   HEADER / NAVBAR STYLING
---------------------------------------------------------------- */
header.bd-header {
    background: var(--header-gradient) !important;
}

/* Navigation links - ensure contrast against gradient */
header.bd-header .nav-link,
header.bd-header a {
    color: #ffffff !important;
    font-weight: 500;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Active navigation highlight */
.nav-link.active, 
.current.reference.internal,
header.bd-header .nav-link.active,
header.bd-header a.current {
    color: #ffffff !important;
    font-weight: 700;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    border-bottom: 2px solid #ffffff;
}

/* Navbar links hover state */
header.bd-header .nav-link:hover,
header.bd-header a:hover {
    color: #ffffff !important;
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
    transform: translateY(-1px);
    transition: all 0.2s ease;
}

/* Navbar icons - ensure visibility */
a.navbar-icon {
    color: #ffffff !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}

/* Navbar icons hover */
a.navbar-icon:hover {
    color: #ffffff !important;
    transform: scale(1.1);
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
    transition: all 0.2s ease;
}

/* ----------------------------------------------------------------
   CARDS, PANELS, CODE BLOCKS
---------------------------------------------------------------- */
.bd-card {
    background: var(--card-bg) !important;
    border-radius: 10px;
}

/* Code block highlighting accents */
.highlight {
    border-left: 4px solid var(--primary-color);
}

/* Links */
a {
    color: var(--primary-color);
}

a:hover {
    color: var(--accent-color);
}

/* ----------------------------------------------------------------
   DARK MODE TOGGLE SUPPORT
   Support for theme toggles that set `data-theme="dark"` or
   common dark-mode classes. These mirror the variables used in
   the prefers-color-scheme block so the theme toggle works.
---------------------------------------------------------------- */
html[data-theme="dark"], html.theme-dark, body.dark {
    --background-color: #1a1a1a;
    --text-color: #f0f0f0;
    --card-bg: #2d2d2d;

    --pst-color-background: var(--background-color);
    --pst-color-text: var(--text-color);
}

/* Apply colors broadly to avoid isolated black text on dark pages */
html[data-theme="dark"] body,
html.theme-dark body,
body.dark,
html[data-theme="dark"] .wy-nav-content,
html.theme-dark .wy-nav-content,
body.dark .wy-nav-content,
html[data-theme="dark"] .bd-content,
html.theme-dark .bd-content,
body.dark .bd-content {
    background-color: var(--background-color) !important;
    color: var(--text-color) !important;
}

/* Links and interactive elements */
html[data-theme="dark"] a,
html.theme-dark a,
body.dark a {
    color: var(--primary-color) !important;
}

/* Cards and panels */
html[data-theme="dark"] .bd-card,
html.theme-dark .bd-card,
body.dark .bd-card {
    background: var(--card-bg) !important;
    color: var(--text-color) !important;
}

/* Code blocks and highlights */
html[data-theme="dark"] pre,
html[data-theme="dark"] code,
html.theme-dark pre,
html.theme-dark code,
body.dark pre,
body.dark code {
    color: var(--text-color) !important;
    background: transparent !important;
}

html[data-theme="dark"] .highlight,
html.theme-dark .highlight,
body.dark .highlight {
    border-left-color: var(--primary-color) !important;
    background: var(--card-bg) !important;
    color: var(--text-color) !important;
}

/* Increase specificity for elements that sometimes get black text */
html[data-theme="dark"] .document *,
html.theme-dark .document *,
body.dark .document * {
    color: inherit !important;
}
/* ============================================================
   TYPOGRAPHY ENHANCEMENTS
   Improved readability through better spacing and sizing
   ============================================================ */

/* Body text readability */
.bd-content {
    font-size: 16px;
    line-height: 1.7;
    max-width: 900px;
}

/* Paragraph spacing */
.bd-content p {
    margin-bottom: 1.2em;
    line-height: 1.7;
}

/* Heading hierarchy and spacing */
.bd-content h1 {
    font-size: 2.5em;
    margin-top: 1em;
    margin-bottom: 0.6em;
    font-weight: 700;
    line-height: 1.2;
    border-bottom: 3px solid var(--primary-color);
    padding-bottom: 0.3em;
}

.bd-content h2 {
    font-size: 2em;
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    font-weight: 600;
    line-height: 1.3;
    border-bottom: 2px solid var(--secondary-color);
    padding-bottom: 0.2em;
}

.bd-content h3 {
    font-size: 1.5em;
    margin-top: 1.3em;
    margin-bottom: 0.5em;
    font-weight: 600;
    line-height: 1.4;
    color: var(--primary-color);
}

.bd-content h4 {
    font-size: 1.25em;
    margin-top: 1.2em;
    margin-bottom: 0.4em;
    font-weight: 600;
    line-height: 1.4;
}

/* List styling */
.bd-content ul,
.bd-content ol {
    margin-bottom: 1.2em;
    padding-left: 2em;
    line-height: 1.7;
}

.bd-content li {
    margin-bottom: 0.5em;
}

.bd-content li > ul,
.bd-content li > ol {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

/* Code block improvements */
.bd-content pre {
    padding: 1em;
    margin: 1.5em 0;
    border-radius: 6px;
    overflow-x: auto;
    line-height: 1.5;
    background: var(--card-bg);
    border: 1px solid rgba(0, 0, 0, 0.1);
}

.bd-content code {
    font-size: 0.9em;
    padding: 0.2em 0.4em;
    border-radius: 3px;
    background: rgba(150, 150, 150, 0.1);
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace;
}

/* Don't style inline code inside pre blocks */
.bd-content pre code {
    padding: 0;
    background: transparent;
    border-radius: 0;
}

/* Blockquote styling */
.bd-content blockquote {
    margin: 1.5em 0;
    padding: 1em 1.5em;
    border-left: 4px solid var(--accent-color);
    background: rgba(150, 150, 150, 0.05);
    border-radius: 0 6px 6px 0;
    font-style: italic;
}

/* Table improvements */
.bd-content table {
    margin: 1.5em 0;
    border-collapse: collapse;
    width: 100%;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.bd-content table th {
    background: var(--primary-color);
    color: white;
    padding: 0.75em;
    text-align: left;
    font-weight: 600;
}

.bd-content table td {
    padding: 0.75em;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.bd-content table tr:hover {
    background: rgba(150, 150, 150, 0.05);
}

/* Link styling improvements */
.bd-content a {
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: all 0.2s ease;
}

.bd-content a:hover {
    border-bottom-color: var(--accent-color);
}

/* Horizontal rules */
.bd-content hr {
    margin: 2em 0;
    border: none;
    border-top: 2px solid rgba(150, 150, 150, 0.2);
}

/* Navigation sidebar improvements */
.bd-sidebar {
    font-size: 0.95em;
}

.bd-sidebar .toctree-l1 {
    margin-bottom: 0.5em;
}

.bd-sidebar a {
    padding: 0.4em 0.8em;
    display: block;
    border-radius: 4px;
    transition: background 0.2s ease;
}

.bd-sidebar a:hover {
    background: rgba(150, 150, 150, 0.1);
}

/* Table of contents on the right */
.bd-toc {
    font-size: 0.9em;
}

.bd-toc nav {
    position: sticky;
    top: 1em;
}

/* Improved spacing for toctree directive output */
.toctree-wrapper {
    margin: 2em 0;
}

.toctree-wrapper ul {
    list-style: none;
    padding-left: 0;
}

.toctree-wrapper li {
    margin-bottom: 0.8em;
    padding-left: 1.5em;
    position: relative;
}

.toctree-wrapper li::before {
    content: "â†’";
    position: absolute;
    left: 0;
    color: var(--primary-color);
    font-weight: bold;
}

/* Search box styling */
.bd-search {
    margin-bottom: 1em;
}

.bd-search input {
    border-radius: 6px;
    border: 2px solid rgba(150, 150, 150, 0.2);
    padding: 0.6em 1em;
    transition: border-color 0.2s ease;
}

.bd-search input:focus {
    border-color: var(--primary-color);
    outline: none;
}

/* ============================================================
   RESPONSIVE IMPROVEMENTS
   ============================================================ */

@media (max-width: 768px) {
    .bd-content {
        font-size: 15px;
    }
    
    .bd-content h1 {
        font-size: 2em;
    }
    
    .bd-content h2 {
        font-size: 1.7em;
    }
    
    .bd-content h3 {
        font-size: 1.4em;
    }
}

/* ============================================================
   ACCESSIBILITY IMPROVEMENTS
   ============================================================ */

/* Focus indicators */
a:focus,
button:focus,
input:focus {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
}

/* Skip to content link */
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--accent-color);
    color: white;
    padding: 8px;
    text-decoration: none;
    z-index: 100;
}

.skip-link:focus {
    top: 0;
}